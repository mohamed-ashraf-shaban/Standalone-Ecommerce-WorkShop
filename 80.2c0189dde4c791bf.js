"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[80],{5080:(m,u,r)=>{r.r(u),r.d(u,{WishlistComponent:()=>A});var d=r(6814),h=r(1120),p=r(5262),t=r(4769),a=r(9196),g=r(2425),c=r(6722);function _(e,l){if(1&e){const s=t.EpF();t.TgZ(0,"i",18),t.NdJ("click",function(){t.CHM(s);const n=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.addFav(n._id))}),t.qZA()}}function f(e,l){if(1&e){const s=t.EpF();t.TgZ(0,"i",19),t.NdJ("click",function(){t.CHM(s);const n=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.removeFav(n._id))}),t.qZA()}}function v(e,l){if(1&e&&t._UZ(0,"i",20),2&e){const s=l.$implicit,i=t.oxw().$implicit;t.ekj("rating-color",i.ratingsAverage>=s)}}const x=function(e){return["/productDetails",e]},C=function(){return[1,2,3,4,5]};function E(e,l){if(1&e){const s=t.EpF();t.TgZ(0,"div",5)(1,"div",6),t.YNc(2,_,1,0,"i",7),t.YNc(3,f,1,0,"i",8),t.TgZ(4,"header",9),t._UZ(5,"img",10),t.TgZ(6,"h3",11),t._uU(7),t.ALo(8,"cutText"),t.qZA(),t.TgZ(9,"h3",12),t._uU(10),t.qZA(),t.TgZ(11,"div",13)(12,"span"),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"p",14),t.YNc(16,v,1,2,"i",15),t.TgZ(17,"span"),t._uU(18),t.qZA()()()(),t.TgZ(19,"footer")(20,"button",16,17),t.NdJ("click",function(){const o=t.CHM(s).$implicit,D=t.MAs(21),W=t.oxw(2);return t.KtG(W.addProduct(o._id,D))}),t._uU(22,"+Add To Cart"),t.qZA()()()()}if(2&e){const s=l.$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!i.wishlistData.includes(s._id)),t.xp6(1),t.Q6J("ngIf",i.wishlistData.includes(s._id)),t.xp6(1),t.Q6J("routerLink",t.VKq(16,x,s._id)),t.xp6(1),t.Q6J("src",s.imageCover,t.LSH)("alt",s.title),t.xp6(2),t.Oqu(t.xi3(8,10,s.title,3)),t.xp6(3),t.Oqu(s.category.name),t.xp6(3),t.Oqu(t.xi3(14,13,s.price,"E\xa3")),t.xp6(3),t.Q6J("ngForOf",t.DdM(18,C)),t.xp6(2),t.Oqu(s.ratingsAverage)}}function O(e,l){if(1&e&&(t.TgZ(0,"section",2)(1,"div",3),t.YNc(2,E,23,19,"div",4),t.qZA()()),2&e){const s=t.oxw();t.xp6(2),t.Q6J("ngForOf",s.products)}}function T(e,l){1&e&&(t.TgZ(0,"h2",21),t._uU(1," Your Wishlist Is Empty.... "),t.qZA())}let A=(()=>{class e{constructor(s,i,n,o){this._WishlistService=s,this._toastr=i,this._Renderer2=n,this._AddtocartService=o,this.products=[],this.wishlistData=[]}ngOnInit(){this._WishlistService.getWishlist().subscribe({next:s=>{this.products=s.data;const i=s.data.map(n=>n._id);this.wishlistData=i}})}addProduct(s,i){this._Renderer2.setAttribute(i,"disabled","true"),this._AddtocartService.addToCart(s).subscribe({next:n=>{this._toastr.success(n.message,"Successfully !"),this._Renderer2.removeAttribute(i,"disabled"),this._AddtocartService.cartNum.next(n.numOfCartItems)},error:n=>{this._Renderer2.removeAttribute(i,"disabled")}})}addFav(s){this._WishlistService.addToWishlist(s).subscribe({next:i=>{console.log(i),this._toastr.success(i.message),this.wishlistData=i.data}})}removeFav(s){this._WishlistService.removeItemWishlist(s).subscribe({next:i=>{console.log(i),this._toastr.success(i.message),this.wishlistData=i.data;const n=this.products.filter(o=>this.wishlistData.includes(o._id));this.products=n}})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(a.M),t.Y36(g._W),t.Y36(t.Qsj),t.Y36(c.n))};static#s=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","py-5",4,"ngIf","ngIfElse"],["msg",""],[1,"py-5"],[1,"row"],["class","col-sm-6 col-md-3 col-lg-4 col-xxl-2 mb-3",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-3","col-lg-4","col-xxl-2","mb-3"],[1,"product","h-100"],["class","far fa-heart heart",3,"click",4,"ngIf"],["class","fas fa-heart heart text-danger",3,"click",4,"ngIf"],["role","button",3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"h6"],[1,"h6","text-main"],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0","d-flex","align-items-center"],["class","fas fa-star font-sm me-1",3,"rating-color",4,"ngFor","ngForOf"],[1,"btn","main-btn","w-100","my-3",3,"click"],["btnAdd",""],[1,"far","fa-heart","heart",3,"click"],[1,"fas","fa-heart","heart","text-danger",3,"click"],[1,"fas","fa-star","font-sm","me-1"],[1,"text-center"]],template:function(i,n){if(1&i&&(t.YNc(0,O,3,1,"section",0),t.YNc(1,T,2,0,"ng-template",null,1,t.W1O)),2&i){const o=t.MAs(2);t.Q6J("ngIf",n.products.length>0&&n.products)("ngIfElse",o)}},dependencies:[d.ez,d.sg,d.O5,d.H9,h.rH,p.Q],styles:[".product[_ngcontent-%COMP%]:hover   .main-btn[_ngcontent-%COMP%]{transform:translateY(0);z-index:1}.product[_ngcontent-%COMP%]   .main-btn[_ngcontent-%COMP%]{transform:translateY(170%);transition:all .3s;z-index:0}"]})}return e})()},6722:(m,u,r)=>{r.d(u,{n:()=>t});var d=r(5619),h=r(4769),p=r(9862);let t=(()=>{class a{constructor(c){this._HttpClient=c,this.cartNum=new d.X(0),this.basUrl="https://ecommerce.routemisr.com/api/v1/"}addToCart(c){return this._HttpClient.post(this.basUrl+"cart",{productId:c})}getUserCart(){return this._HttpClient.get(this.basUrl+"cart")}removeCartItem(c){return this._HttpClient.delete(this.basUrl+`cart/${c}`)}updateCartCount(c,_){return this._HttpClient.put(this.basUrl+`cart/${c}`,{count:_})}clearUserCart(){return this._HttpClient.delete(this.basUrl+"cart")}checkOut(c,_){return this._HttpClient.post(this.basUrl+`orders/checkout-session/${c}?url=http://localhost:4200`,{shippingAddress:_})}static#t=this.\u0275fac=function(_){return new(_||a)(h.LFG(p.eN))};static#s=this.\u0275prov=h.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);